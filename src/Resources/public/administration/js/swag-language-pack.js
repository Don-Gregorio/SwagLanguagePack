(this.webpackJsonp=this.webpackJsonp||[]).push([["swag-language-pack"],{"+fJX":function(a,e){const{Component:n}=Shopware;n.override("sw-settings-language-list",{computed:{allowDelete:()=>!1}})},"24t7":function(a,e){const{Component:n,Defaults:t}=Shopware,{Criteria:s}=Shopware.Data;n.override("sw-language-switch",{computed:{languageCriteria(){return this.$super("languageCriteria").addFilter(s.multi("OR",[s.equals("extensions.swagLanguagePackLanguage.salesChannelActive",!0),s.equals("id",t.systemLanguageId),s.equalsAny("name",["English","Deutsch"])]))}}})},"4iBN":function(a,e){a.exports='{% block swag_language_pack_settings_sales_channel %}\n    <swag-language-pack-settings-base\n            :isLoading="isLoading"\n            :packLanguages="packLanguages"\n            settingsType="salesChannel">\n    </swag-language-pack-settings-base>\n{% endblock %}'},"7vF2":function(a,e){const{Component:n}=Shopware;n.override("sw-sales-channel-detail",{methods:{getLoadSalesChannelCriteria(){return this.$super("getLoadSalesChannelCriteria").addAssociation("languages.locale")}}})},"8WEj":function(a,e){const{Component:n,Defaults:t}=Shopware,{Criteria:s}=Shopware.Data;n.override("sw-first-run-wizard-welcome",{methods:{getLanguageCriteria(){return this.$super("getLanguageCriteria").addAssociation("swagLanguagePackLanguage").addSorting(s.sort("name","ASC")).addFilter(s.multi("OR",[s.equals("extensions.swagLanguagePackLanguage.administrationActive",!0),s.equals("id",t.systemLanguageId),s.equalsAny("name",["English","Deutsch"])]))}}})},Ahfz:function(a,e,n){},DJPE:function(a,e){const{Criteria:n}=Shopware.Data,{warn:t}=Shopware.Utils.debug,s=Shopware.Service("repositoryFactory").create("swag_language_pack_language"),l=(new n).addFilter(n.equals("administrationActive",!0)).addAggregation(n.terms("locales","language.locale.code",null,null,null)),i=Shopware.Plugin.addBootPromise();let g;s.search(l,Shopware.Context.api).then(a=>{a.aggregations.locales.buckets.forEach(({key:a})=>{!1===Shopware.Locale.getByName(a)&&(g=a,Shopware.Locale.register(a,{}))}),i()}).catch(()=>{let a='Unable to register "packLanguages".';void 0!==g&&(a+=" Problems occurred while installing language: "+g),t("SwagLanguagePack",a),i()})},"Ohi/":function(a,e){a.exports='{% block sw_sales_channel_defaults_select %}\n    {% block swag_sales_channel_defaults_select_filterable %}\n        <sw-container class="sw-sales-channel-defaults-select" gap="0px 30px" columns="1fr 200px">\n\n            {% block swag_sales_channel_defaults_select_filterable_content %}\n                <template v-if="salesChannel">\n\n                    {% block swag_sales_channel_defaults_select_filterable_content_languages %}\n                        <sw-entity-multi-select\n                                :disabled="disabled"\n                                :class="multiSelectClass"\n                                :criteria="criteria"\n                                :label="propertyLabel"\n                                :helpText="helpText"\n                                :entityCollection="propertyCollection"\n                                @change="updateCollection">\n                        </sw-entity-multi-select>\n                    {% endblock %}\n\n                    {% block swag_sales_channel_defaults_select_filterable_content_default_language %}\n                        <sw-entity-single-select\n                                :disabled="disabled"\n                                :class="singleSelectClass"\n                                :criteria="criteria"\n                                :label="defaultPropertyLabel"\n                                :helpText="helpText"\n                                :entity="propertyEntityName"\n                                :value="defaultId"\n                                :error="defaultsValueError"\n                                required\n                                @change="updateDefault">\n                        </sw-entity-single-select>\n                    {% endblock %}\n\n                </template>\n            {% endblock %}\n\n        </sw-container>\n    {% endblock %}\n{% endblock %}'},PeoB:function(a,e){a.exports='{% block sw_sales_channel_detail_domains_input_snippet_set %}\n    <sw-entity-single-select\n            v-model="currentDomain.snippetSetId"\n            entity="snippet_set"\n            :criteria="snippetSetCriteria"\n            :label="$tc(\'sw-sales-channel.detail.labelInputSnippet\')"\n            required\n            @option-select="onOptionSelect">\n    </sw-entity-single-select>\n{% endblock %}'},RzzX:function(a,e,n){var t=n("Ahfz");"string"==typeof t&&(t=[[a.i,t,""]]),t.locals&&(a.exports=t.locals);(0,n("SZ7m").default)("e30344c8",t,!0,{})},"SLm+":function(a,e,n){"use strict";n.r(e);n("24t7"),n("DJPE");(()=>{const a=n("m7in");return a.keys().reduce((e,n)=>{const t={name:"swag-language-pack-flag-"+n.split("/")[1].split(".")[0],functional:!0,render(e,t){const s=t.data;return e("span",{class:[s.staticClass,s.class],style:s.style,attrs:s.attrs,on:s.on,domProps:{innerHTML:a(n).default}})}};return e.push(t),e},[])})().forEach(a=>{Shopware.Component.register(a.name,a)});n("8WEj");var t=n("PeoB"),s=n.n(t);const{Component:l}=Shopware,{Criteria:i}=Shopware.Data;l.override("sw-sales-channel-detail-domains",{template:s.a,computed:{snippetSetCriteria(){const a=this.salesChannel.languages.map(a=>a.locale.code);return(new i).addFilter(i.equalsAny("iso",a))}}});var g=n("Ohi/"),o=n.n(g);const{Component:r}=Shopware,{Criteria:c}=Shopware.Data;r.extend("swag-sales-channel-defaults-select-filterable","sw-sales-channel-defaults-select",{template:o.a,props:{criteria:{type:Object,required:!1,default:()=>new c(1,25)}}});n("7vF2");var u=n("i5Xd"),p=n.n(u);const{Component:d,Defaults:w}=Shopware,{Criteria:_}=Shopware.Data;d.override("sw-sales-channel-detail-base",{template:p.a,computed:{languageCriteria:()=>(new _).addAssociation("swagLanguagePackLanguage").addSorting(_.sort("name","ASC")).addFilter(_.multi("OR",[_.equals("extensions.swagLanguagePackLanguage.salesChannelActive",!0),_.equals("id",w.systemLanguageId),_.equalsAny("name",["English","Deutsch"])]))}});n("+fJX");var k=n("uPme"),h=n.n(k);n("pPNE");const{Component:m}=Shopware;m.register("swag-language-pack-flag",{template:h.a,props:{locale:{type:String,required:!1,default:""}},computed:{flagComponentName(){return"swag-language-pack-flag-"+this.locale.split("-")[1].toLowerCase()}}});var b=n("qr73"),f=n.n(b);n("m9Nv");const{Component:v}=Shopware;v.register("swag-pack-language-entry",{template:f.a,props:{value:{type:Object,required:!0},field:{type:String,required:!0},label:{type:String,required:!0},description:{type:String,required:!1,default:""},flagLocale:{type:String,required:!1,default:""},disabled:{type:Boolean,required:!1,default:!1}}});var y=n("lPQM"),L=n.n(y);const{Component:C}=Shopware;C.register("swag-language-pack-settings-icon",{template:L.a});var S=n("grAk"),x=n.n(S);const{Component:P,Defaults:A}=Shopware,{Criteria:q}=Shopware.Data;P.register("swag-language-pack-settings",{template:x.a,inject:["repositoryFactory"],mixins:["notification"],data:()=>({isLoading:!1,isSaveSuccessful:!1,hasChanges:!1,packLanguages:[],fallbackLocaleId:null,confirmPasswordModal:!1}),metaInfo(){return{title:this.$createTitle()}},computed:{packLanguageRepository(){return this.repositoryFactory.create("swag_language_pack_language")},languageRepository(){return this.repositoryFactory.create("language")},userRepository(){return this.repositoryFactory.create("user")},packLanguageCriteria:()=>(new q).addSorting(q.sort("language.name","ASC")).addAssociation("language.salesChannels.domains")},created(){this.createdComponent()},beforeRouteLeave(a,e,n){n(),this.hasChanges&&window.location.reload()},methods:{createdComponent(){this.loadPackLanguages()},loadPackLanguages(){return this.isLoading=!0,this.packLanguageRepository.search(this.packLanguageCriteria,Shopware.Context.api).then(a=>{this.packLanguages=a}).finally(()=>{this.isLoading=!1})},onSave(){this.confirmPasswordModal=!0},onSaveFinish(){this.isSaveSuccessful=!1},onCloseConfirmPasswordModal(){this.confirmPasswordModal=!1},savePackLanguages(){return this.isLoading=!0,this.packLanguageRepository.saveAll(this.packLanguages,Shopware.Context.api).then(()=>(this.hasChanges=!0,this.resetInvalidUserLanguages())).catch(()=>{this.createNotificationError({message:this.$tc("swag-language-pack.settings.card.messageSaveError")})}).finally(()=>{this.isLoading=!1,this.isSaveSuccessful=!0,this.loadPackLanguages()})},async resetInvalidUserLanguages(){const a=await this.fetchInvalidLocaleIds(),e=(new q).addFilter(q.not("OR",[q.equalsAny("localeId",a)]));let n=await this.userRepository.search(e,Shopware.Context.api);return n=n.reduce((a,e)=>(e.localeId=this.fallbackLocaleId,a.push(e),a),[]),this.userRepository.saveAll(n,Shopware.Context.api)},async fetchInvalidLocaleIds(){const a=(new q).addFilter(q.multi("OR",[q.equals("id",Shopware.Defaults.systemLanguageId),q.equalsAny("name",["English","Deutsch"])])),e=(await this.languageRepository.search(a,Shopware.Context.api)).map(a=>(a.id===A.systemLanguageId&&(this.fallbackLocaleId=a.localeId),a.localeId)),n=this.packLanguages.filter(a=>a.administrationActive);return e.push(...n.map(a=>a.language.localeId)),e}}});var I=n("jFHS"),D=n.n(I);n("RzzX");const{Component:T}=Shopware;T.register("swag-language-pack-settings-base",{template:D.a,props:{isLoading:{type:Boolean,required:!0},packLanguages:{type:Array,required:!0},settingsType:{type:String,required:!0,validator:a=>["administration","salesChannel"].includes(a)}},computed:{description(){const a=`<a href="#/sw/profile/index">\n                ${this.$tc("swag-language-pack.settings.card.administration.descriptionTargetLinkText")}\n            </a>`;return this.$tc(`swag-language-pack.settings.card.${this.settingsType}.description`,0,{userInterfaceLanguageLink:a})}}});var $=n("tRG2"),E=n.n($);const{Component:F}=Shopware;F.register("swag-language-pack-settings-administration",{template:E.a,props:{isLoading:{type:Boolean,required:!0},packLanguages:{type:Array,required:!0}}});var N=n("4iBN"),R=n.n(N);const{Component:M}=Shopware;M.register("swag-language-pack-settings-sales-channel",{template:R.a,props:{isLoading:{type:Boolean,required:!0},packLanguages:{type:Array,required:!0}}});const{Module:O}=Shopware;O.register("swag-language-pack",{type:"plugin",name:"SwagLanguagePack",title:"swag-language-pack.general.mainMenuItemGeneral",description:"swag-language-pack.general.descriptionTextModule",version:"1.0.0",targetVersion:"1.0.0",color:"#9AA8B5",icon:"default-action-settings",routes:{index:{component:"swag-language-pack-settings",path:"index",redirect:{name:"swag.language.pack.index.administration"},meta:{parentPath:"sw.settings.index",privilege:"language.viewer"},children:{administration:{component:"swag-language-pack-settings-administration",path:"administration",meta:{parentPath:"sw.settings.index",privilege:"language.viewer"}},salesChannel:{component:"swag-language-pack-settings-sales-channel",path:"sales-channel",meta:{parentPath:"sw.settings.index",privilege:"language.viewer"}}}}},settingsItem:{group:"plugins",to:"swag.language.pack.index",iconComponent:"swag-language-pack-settings-icon",backgroundEnabled:!0,privilege:"language.viewer"}});n("nna2")},bKXM:function(a,e,n){},grAk:function(a,e){a.exports='{% block swag_language_pack_settings %}\n    <sw-page>\n\n        {% block swag_language_pack_settings_header %}\n            <template #smart-bar-header>\n                <h2>\n                    {{ $tc(\'sw-settings.index.title\') }}\n                    <sw-icon name="small-arrow-medium-right" small></sw-icon>\n                    {{ $tc(\'swag-language-pack.settings.header\') }}\n                </h2>\n            </template>\n        {% endblock %}\n\n        {% block swag_language_pack_settings_actions %}\n            <template #smart-bar-actions>\n\n                {% block swag_language_pack_settings_actions_save %}\n                    <sw-button-process\n                            class="swag-language-pack-settings__save-action"\n                            variant="primary"\n                            :processSuccess="isSaveSuccessful"\n{#                            ToDo LAN-37 - Implement ACL #}\n{#                            :disabled="!acl.can(\'swag_language_pack_language.editor\')" #}\n                            @process-finish="onSaveFinish"\n                            @click="onSave">\n                        {{ $tc(\'global.default.save\') }}\n                    </sw-button-process>\n                {% endblock %}\n\n            </template>\n        {% endblock %}\n\n        {% block swag_language_pack_settings_content %}\n            <template #content>\n\n                {% block swag_language_pack_settings_content_card_view %}\n                    <sw-card-view>\n\n                        {% block swag_language_pack_settings_content_tabs %}\n                            <sw-tabs v-if="!isLoading" class="swag-language-pack-settings__tabs">\n\n                                {% block swag_language_pack_settings_content_tabs_administration %}\n                                    <sw-tabs-item\n                                            class="swag-language-pack-settings__tab-administration"\n                                            :route="{ name: \'swag.language.pack.index.administration\' }">\n                                        {{ $tc(\'swag-language-pack.settings.card.administration.tabTitle\') }}\n                                    </sw-tabs-item>\n                                {% endblock %}\n\n                                {% block swag_language_pack_settings_content_tabs_sales_channel %}\n                                    <sw-tabs-item\n                                            class="swag-language-pack-settings__tab-sales-channel"\n                                            :route="{ name: \'swag.language.pack.index.salesChannel\' }">\n                                        {{ $tc(\'swag-language-pack.settings.card.salesChannel.tabTitle\') }}\n                                    </sw-tabs-item>\n                                {% endblock %}\n                            </sw-tabs>\n                        {% endblock %}\n\n                        {% block swag_language_pack_settings_content_router_view %}\n                            <router-view\n                                    v-if="!isLoading"\n                                    :isLoading="isLoading"\n                                    :packLanguages="packLanguages">\n                            </router-view>\n                        {% endblock %}\n\n                        {% block swag_language_pack_settings_content_loader %}\n                            <sw-loader v-if="isLoading"></sw-loader>\n                        {% endblock %}\n\n                        {% block swag_language_pack_settings_content_verify_user_modal %}\n                            <sw-verify-user-modal\n                                    v-if="confirmPasswordModal"\n                                    @verified="savePackLanguages"\n                                    @close="onCloseConfirmPasswordModal">\n                            </sw-verify-user-modal>\n                        {% endblock %}\n\n                    </sw-card-view>\n                {% endblock %}\n\n            </template>\n        {% endblock %}\n\n    </sw-page>\n{% endblock %}\n'},i5Xd:function(a,e){a.exports='{% block sw_sales_channel_detail_base_general_input_languages %}\n    <swag-sales-channel-defaults-select-filterable\n            v-if="!isProductComparison"\n            :salesChannel="salesChannel"\n            :criteria="languageCriteria"\n            propertyName="languages"\n            defaultPropertyName="languageId"\n            propertyNameInDomain="languageId"\n            :propertyLabel="$tc(\'sw-sales-channel.detail.labelInputLanguages\')"\n            :defaultPropertyLabel="$tc(\'sw-sales-channel.detail.labelInputDefaultLanguage\')"\n            :disabled="!acl.can(\'sales_channel.editor\')">\n    </swag-sales-channel-defaults-select-filterable>\n{% endblock %}'},jFHS:function(a,e){a.exports='{% block swag_language_pack_settings_base %}\n    {% block swag_language_pack_settings_base_card_view_language_selection %}\n        <sw-card\n                class="swag-language-pack-settings-base"\n                :title="$tc(`swag-language-pack.settings.card.${settingsType}.title`)"\n                :disabled="isLoading">\n\n            {% block swag_language_pack_settings_base_card_view_card_loader %}\n                <sw-loader v-if="isLoading"></sw-loader>\n            {% endblock %}\n\n            {% block swag_language_pack_settings_base_card_view_description%}\n                <div v-html="description"\n                     class="swag-language-pack-settings-base__description">\n                </div>\n            {% endblock %}\n\n            {% block swag_language_pack_settings_base_card_view_language_selection_languages %}\n                <template v-for="packLanguage in packLanguages">\n\n                    {% block swag_language_pack_settings_base_card_view_language_selection_language %}\n                        <swag-pack-language-entry\n                                class="swag-language-pack-settings-base__entry"\n                                :value="packLanguage"\n                                :field="`${settingsType}Active`"\n                                :label="packLanguage.language.name"\n                                :description="packLanguage.language.locale.code"\n                                :flagLocale="packLanguage.language.locale.code"\n                                :disabled="settingsType !== \'administration\' && packLanguage.language.salesChannels.length > 0">\n{#                            ToDo LAN-37 - Implement ACL #}\n                        </swag-pack-language-entry>\n                    {% endblock %}\n\n                </template>\n            {% endblock %}\n\n        </sw-card>\n    {% endblock %}\n{% endblock %}'},lPQM:function(a,e){a.exports='{% block swag_language_pack_settings_icon %}\n    <sw-icon name="default-location-flag"></sw-icon>\n{% endblock %}\n'},m7in:function(a,e,n){var t={};function s(a){var e=l(a);return n(e)}function l(a){if(!n.o(t,a)){var e=new Error("Cannot find module '"+a+"'");throw e.code="MODULE_NOT_FOUND",e}return t[a]}s.keys=function(){return Object.keys(t)},s.resolve=l,a.exports=s,s.id="m7in"},m9Nv:function(a,e,n){var t=n("bKXM");"string"==typeof t&&(t=[[a.i,t,""]]),t.locals&&(a.exports=t.locals);(0,n("SZ7m").default)("1cf1b7a9",t,!0,{})},nna2:function(a,e){const{Component:n}=Shopware,{Criteria:t}=Shopware.Data;n.override("sw-users-permissions-user-detail",{computed:{languageCriteria(){return this.$super("languageCriteria").addFilter(t.multi("OR",[t.equals("extensions.swagLanguagePackLanguage.administrationActive",!0),t.equals("id",Shopware.Defaults.systemLanguageId),t.equalsAny("name",["English","Deutsch"])]))}}})},pPNE:function(a,e,n){var t=n("puis");"string"==typeof t&&(t=[[a.i,t,""]]),t.locals&&(a.exports=t.locals);(0,n("SZ7m").default)("1521d2d5",t,!0,{})},puis:function(a,e,n){},qr73:function(a,e){a.exports='{% block swag_pack_language_entry %}\n    <div class="swag-language-pack-entry">\n\n        {% block swag_pack_language_entry_flag %}\n            <swag-language-pack-flag class="swag-language-pack-entry__flag" :locale="flagLocale"></swag-language-pack-flag>\n        {% endblock %}\n\n        {% block swag_pack_language_entry_content %}\n            <div class="swag-language-pack-entry__content">\n\n                {% block swag_pack_language_entry_content_name %}\n                    <div class="swag-language-pack-entry__name">\n                        {{ label }}\n                    </div>\n                {% endblock %}\n\n                {% block swag_pack_language_entry_content_description %}\n                    <div class="swag-language-pack-entry__description">\n                        {{ description }}\n                    </div>\n                {% endblock %}\n\n            </div>\n        {% endblock %}\n\n        {% block swag_pack_language_entry_switch %}\n            <sw-switch-field\n                    v-model="value[field]"\n                    ref="packLanguageToggle"\n                    :disabled="disabled">\n{#                   ToDo LAN-37 - Implement ACL #}\n{#                   :disabled="disabled || !acl.can(\'swag_language_pack_language.editor\')"> #}\n            </sw-switch-field>\n        {% endblock %}\n    </div>\n{% endblock %}\n'},tRG2:function(a,e){a.exports='{% block swag_language_pack_settings_administration %}\n    <swag-language-pack-settings-base\n        :isLoading="isLoading"\n        :packLanguages="packLanguages"\n        settingsType="administration">\n    </swag-language-pack-settings-base>\n{% endblock %}'},uPme:function(a,e){a.exports='{% block swag_language_pack_flag %}\n    <component :is="flagComponentName" :class="locale"></component>\n{% endblock %}\n'}},[["SLm+","runtime","vendors-node"]]]);